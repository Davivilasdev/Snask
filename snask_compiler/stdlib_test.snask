// Teste completo da biblioteca padrão expandida do Snask

print("=== TESTE DA BIBLIOTECA PADRÃO SNASK ===");
print("");

// ===== MATH =====
print("--- Funções Matemáticas ---");
print("abs(-5):", abs(-5));
print("floor(3.7):", floor(3.7));
print("ceil(3.2):", ceil(3.2));
print("round(3.5):", round(3.5));
print("pow(2, 8):", pow(2, 8));
print("sqrt(16):", sqrt(16));
print("min(5, 3, 8, 1):", min(5, 3, 8, 1));
print("max(5, 3, 8, 1):", max(5, 3, 8, 1));
print("sin(PI / 2):", sin(PI / 2));
print("cos(0):", cos(0));
print("Constantes - PI:", PI, "E:", E, "TAU:", TAU);
print("");

// ===== STRING =====
print("--- Funções de String ---");
let text = "  Hello, Snask!  ";
print("Original:", text);
print("upper:", upper(text));
print("lower:", lower(text));
print("trim:", trim(text));
print("len:", len(text));

let words = split("maçã,banana,laranja", ",");
print("split:", words);
print("join:", join(words, " | "));

print("contains:", contains("Snask é incrível", "incrível"));
print("starts_with:", starts_with("Snask", "Sn"));
print("ends_with:", ends_with("Snask", "sk"));

let formatted = format("Olá, {}! Você tem {} anos.", "João", 25);
print("format:", formatted);
print("");

// ===== COLLECTIONS =====
print("--- Funções de Coleções ---");
let numbers = [5, 2, 8, 1, 9, 3];
print("Original:", numbers);
print("sort:", sort(numbers));
print("reverse:", reverse(numbers));
print("unique:", unique([1, 2, 2, 3, 3, 3, 4]));

let nested = [[1, 2], [3, 4], [5, 6]];
print("flatten:", flatten(nested));

print("range(5):", range(5));
print("range(2, 7):", range(2, 7));
print("range(0, 10, 2):", range(0, 10, 2));
print("");

// ===== I/O =====
print("--- Funções de I/O ---");
let test_file = "test_stdlib.txt";
write_file(test_file, "Olá do Snask!\nLinha 2\nLinha 3");
print("Arquivo criado:", exists(test_file));

let content = read_file(test_file);
print("Conteúdo do arquivo:", content);

append_file(test_file, "\nLinha adicionada!");
let updated_content = read_file(test_file);
print("Conteúdo atualizado:", updated_content);

print("É arquivo?", is_file(test_file));
print("É diretório?", is_dir(test_file));

delete(test_file);
print("Arquivo deletado:", exists(test_file));
print("");

// ===== JSON =====
print("--- Funções de JSON ---");
let data = {name: "Snask", version: 2.0, features: ["stdlib", "types", "modules"]};
let json_str = json_stringify(data);
print("JSON:", json_str);

let parsed = json_parse(json_str);
print("Parsed:", parsed);
print("");

// ===== SYSTEM =====
print("--- Funções de Sistema ---");
print("Timestamp:", time());
print("Platform:", platform());
print("Arch:", arch());
print("CWD:", cwd());

let home = env("HOME");
if home != nil {
    print("HOME:", home);
}

print("");
print("=== TODOS OS TESTES CONCLUÍDOS ===");
